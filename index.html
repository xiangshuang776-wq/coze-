<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>生肖推演</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .container { display: flex; gap: 10px; margin-bottom: 20px; }
        input { padding: 5px; width: 200px; }
        button { padding: 5px 15px; cursor: pointer; }
        #result { 
            white-space: pre-wrap; 
            padding: 15px; 
            border: 1px solid #eee; 
            background: #f9f9f9; 
            min-height: 100px;
            line-height: 1.6;
        }
    </style>
</head>
<body>

    <div class="container">
        <input type="text" id="zodiacInput" placeholder="请输入生肖">
        <button id="runBtn">开始推演</button>
    </div>

    <div id="result">结果将在这里显示...</div>

    <script>
        const runBtn = document.getElementById('runBtn');
        const zodiacInput = document.getElementById('zodiacInput');
        const resultDiv = document.getElementById('result');

        // 你的专属 Token
        const TOKEN = "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmNTU2YTNkLWNkMDItNDQ0Zi05ZTBkLTI0NTU0ZTVkYmYyZCJ9.eyJpc3MiOiJodHRwczovL2FwaS5jb3plLmNuIiwiYXVkIjpbIkdWUGRGRGhTZEJGMnZ2VGlWc1hhTmNyamdoMzZ1Y3JLIl0sImV4cCI6ODIxMDI2Njg3Njc5OSwiaWF0IjoxNzY5Nzk5NDUwLCJzdWIiOiJzcGlmZmU6Ly9hcGkuY296ZS5jbi93b3JrbG9hZF9pZGVudGl0eS9pZDo3NjAxMTM1MjYyNDIwMTcyODM2Iiwic3JjIjoiaW5ib3VuZF9hdXRoX2FjY2Vzc190b2tlbl9pZDo3NjAxMjMwNzYwODIwODY3MTA4In0.PaeHNixndF7hmhPvLWKLSjn7yDjGymvm_O39J6w2RoqBOiKRKJ5-NPS8NfN9LYmdtpWHH5tCSCZ_Q4EmBUSxUr0LEquOCmvCs_uUgDGvsVRuvefsrnqDzhC0vBg6ol_zAyPUpSQ2RHP8UujOiEiremsRaJrvU6sXxD7VAgxS7k_ivLGiZkjy9I0NNpZ5g2KmJIAQj2k81m5puNMKESL-HXev2J-kErDXHNJCuNYl3TdBBD9NjKZZEL-q2gNe5N6EvwzEpuGCpIuYQo4HeRSkiwwZV-aS2_rqRIAymTcEc_XEhzN2tchHeEIsoLUwy-SvoYDeOfFKHW9fA4rVWiqLQg";

        runBtn.onclick = async () => {
            const val = zodiacInput.value.trim();
            if (!val) {
                alert("请输入内容");
                return;
            }

            runBtn.disabled = true;
            resultDiv.innerText = "正在推演中，请稍候...";

            try {
                const response = await fetch('/api/run', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${TOKEN}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        "zodiac": val
                    })
                });

                const data = await response.json();
                
                // 根据 Coze 返回的结构显示结果，通常是 data.data 或 data.msg
                // 如果是工作流，通常结果在 data 字段中
                resultDiv.innerText = typeof data === 'object' ? JSON.stringify(data, null, 2) : data;

            } catch (error) {
                resultDiv.innerText = "错误: " + error.message;
            } finally {
                runBtn.disabled = false;
            }
        };
    </script>
</body>
</html>
